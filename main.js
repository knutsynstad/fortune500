!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=(d(n(1)),n(2)),o=d(n(3)),a=d(n(4)),c=d(n(5)),u=n(6),l=d(n(7));function d(e){return e&&e.__esModule?e:{default:e}}var s=(0,u.updateSettings)();(0,i.createEventBindings)(),(0,a.default)(),(0,c.default)(1200),window.onresize=function(){(0,c.default)(1200),s=(0,u.updateSettings)()};var f=d3.scaleLinear().range([0,s.figureSize]),p=d3.scaleLinear().range([s.figureSize,0]),g=(d3.axisBottom().scale(f),d3.axisLeft().scale(p),d3.zoom().scaleExtent([1,15]).on("zoom",function(){var e=document.querySelector("body").dataset;if("open"==e.state&&"none"==e.overlay){var t=d3.zoomTransform(this),n=t.k,r=s.figureSize*n,i=window.innerWidth/2,o=window.innerHeight/2,a=v*n,c=S*n;t.x=b(t.x,i-a-r,i-a),t.y=b(t.y,o-c-r,o-c),h.attr("transform",t)}})),m=d3.select("#figure").call(g),y=(m.append("rect").attr("width","100%").attr("height","100%").style("fill","none"),r((0,l.default)(s),2)),v=y[0],S=y[1],h=m.append("g").attr("id","logo-wrapper");function b(e,t,n){return e<=t?t:e>=n?n:e}fetch("./data.json").then(function(e){return e.json()}).then(function(e){if(window.Worker){var t=function(){s=(0,u.updateSettings)(),r=[],a=[];for(var t=0;t<500;t++)a.push([0,0]);var n={};n.data=e,n.options=s,l.postMessage(n)},n=function(){var e=d3.transition().duration(100);h.selectAll(".logo").data(a).transition(e).attr("height",s.cellSize).attr("width",s.cellSize).attr("x",function(e){return s.linearAssignment?v+e[0]+s.padding/2:v+e[0]}).attr("y",function(e){return s.linearAssignment?S+e[1]+s.padding/2:S+e[1]})},r=[],a=[],c=!0,l=new Worker("tsne_worker.js"),d=new Worker("assignment_worker.js");t();var g={};g.options=s,l.onmessage=function(e){a=e.data,f.domain(d3.extent(a,function(e){return e[0]})).nice(),p.domain(d3.extent(a,function(e){return e[1]})).nice(),a.forEach(function(e){e[0]=f(e[0]),e[1]=p(e[1])}),r.push(a),s.linearAssignment?(c||r.length==s.steps)&&(g.data=a,d.postMessage(g),c=!1):n(),(0,o.default)(r.length,s)},d.onmessage=function(e){c=!0,a=e.data,n()},h.selectAll(".logo").data(a).enter().append("image").attr("class","logo").attr("height",s.cellSize).attr("width",s.cellSize).attr("xlink:href",function(e,t){return"images/"+(t+1).toString().padStart(3,"0")+".png"}).attr("x",0).attr("y",0),document.querySelector("#update").addEventListener("click",function(){(0,i.setOverlay)("none"),t()},!1)}}),document.querySelector("#reset").addEventListener("click",function(){s=(0,u.resetSettings)()},!1)},function(e,t,n){},function(e,t,n){"use strict";function r(e){var t=document.querySelector("body").dataset;"open"==e&&"closed"==t.state?t.state=e:"closed"==e&&"open"==t.state&&(t.state=e,t.overlay="none")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none",t=document.querySelector("body").dataset;"open"==t.state&&(t.overlay==e&&"none"!==t.overlay?t.overlay="none":t.overlay=e)}function o(){var e=document.querySelector("body").dataset;e.instructions="true",setTimeout(function(){e.instructions="false"},1e4)}e.exports={createEventBindings:function(){document.querySelector("#start").addEventListener("click",function(){r("open"),o()},!1),document.querySelector("#share").parentNode.addEventListener("click",function(){i("share")},!1),document.querySelector("#more").parentNode.addEventListener("click",function(){i("more")},!1),document.querySelector("#edit").parentNode.addEventListener("click",function(){i("configuration")},!1),document.querySelector("#introduction-button").addEventListener("click",function(){r("closed")},!1),document.querySelector("#instruction-button").addEventListener("click",function(){o(),i("none")},!1),document.querySelector("#about-button").addEventListener("click",function(){i("about")},!1),document.querySelector("#close-about").addEventListener("click",function(){i("none")},!1),document.querySelector("#overlay").addEventListener("click",function(){i("none")},!1),document.querySelector("#close-configuration").addEventListener("click",function(){i("none")},!1)},setOverlay:i}},function(e,t,n){"use strict";var r=document.querySelector(".entry-state"),i=document.querySelector(".calculating-state"),o=document.querySelector("#calculating");e.exports=function(e,t){var n=t.steps,a="Step "+e+" of "+n+" ("+Math.round(e/n*100)+"%)";if(r.innerText=a,i.innerText=a,1==e)o.classList.add("visible");else if(e==n){o.classList.remove("visible");var c=document.querySelector("body").dataset;"loading"==c.state?c.state="closed":c.state="open"}}},function(e,t,n){"use strict";e.exports=function(){document.querySelectorAll("ol .icon").forEach(function(e){e.addEventListener("click",function(){e.parentNode.parentNode.classList.toggle("open")},!1)})}},function(e,t,n){"use strict";e.exports=function(e){var t=document.querySelector("#entry"),n=window.innerWidth-15,r=n-e>200?(n-e)/2:100;t.style.right=r+"px"}},function(e,t,n){"use strict";var r={steps:250,epsilon:10,perplexity:15,dim:2,padding:2,linearAssignment:!0,cellsPerSide:30,cellSize:10,figureSize:1e3,margin:90};e.exports={updateSettings:function(){var e=r;!function(){for(var e=["#epsilon","#perplexity","#steps","#cellsPerSide","#padding"],t=function(t){var n=document.querySelector(e[t]);n.addEventListener("change",function(e){var t=Number(n.value),r=Number(n.min),i=Number(n.max);n.value=t<=r?r:t>=i?i:t},!1)},n=0;n<e.length;n++)t(n)}();for(var t=document.querySelectorAll(".variable input"),n=0;n<t.length;n++)"number"===t[n].type?e[t[n].id]=Number(t[n].value):"checkbox"===t[n].type&&(e[t[n].id]=t[n].checked);return e.figureSize=Math.min(window.innerWidth-2*e.margin,window.innerHeight-2*e.margin),e.cellSize=e.figureSize/e.cellsPerSide,e.linearAssignment&&(e.cellSize=e.cellSize-e.padding),e},resetSettings:function(){var e=r;return document.querySelector("#epsilon").value=e.epsilon,document.querySelector("#perplexity").value=e.perplexity,document.querySelector("#steps").value=e.steps,document.querySelector("#linearAssignment").checked=e.linearAssignment,document.querySelector("#cellsPerSide").value=e.cellsPerSide,document.querySelector("#padding").value=e.padding,e}}},function(e,t,n){"use strict";e.exports=function(e){var t=window.innerWidth-2*e.margin,n=window.innerHeight-2*e.margin,r=(window.innerWidth-e.figureSize)/2,i=(window.innerHeight-e.figureSize)/2;return[t>n?r:e.margin,t<n?i:e.margin]}}]);