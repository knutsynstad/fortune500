!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var r=n(1),o=function(e){var t=document.querySelector("body").dataset;"closed"===e&&"none"!==t.overlay&&(t.overlay="none"),t.state=e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none",t=document.querySelector("body").dataset;"open"===t.state&&(t.overlay===e&&"none"!==t.overlay?t.overlay="none":t.overlay=e)},u=function(){var e=document.querySelector("body").dataset;e.instructions=!0,setTimeout(function(){e.instructions=!1},1e4)};e.exports={createEventBindings:function(){document.querySelector("#start").addEventListener("click",function(){o("open"),u()},!1),document.querySelector("#share").parentNode.addEventListener("click",function(){i("share")},!1),document.querySelector("#more").parentNode.addEventListener("click",function(){i("more")},!1),document.querySelector("#edit").parentNode.addEventListener("click",function(){i("configuration")},!1),document.querySelector("#introduction-button").addEventListener("click",function(){o("closed")},!1),document.querySelector("#instruction-button").addEventListener("click",function(){u(),i("none")},!1),document.querySelector("#about-button").addEventListener("click",function(){i("about")},!1),document.querySelector("#close-about").addEventListener("click",function(){i("none")},!1),document.querySelector("#overlay").addEventListener("click",function(){i("none")},!1),document.querySelector("#close-configuration").addEventListener("click",function(){i("none")},!1),document.querySelector("#reset").addEventListener("click",function(){(0,r.resetSettings)()},!1)},setOverlay:i,setState:o}},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var o={steps:250,epsilon:10,perplexity:15,dim:2,padding:2,linearAssignment:!0,cellsPerSide:30,cellSize:10,figureSize:1e3,margin:90};e.exports={getSettings:function(){var e=document.querySelectorAll(".variable input"),t=o;return["#epsilon","#perplexity","#steps","#cellsPerSide","#padding"].forEach(function(e){var t=document.querySelector(e);t.addEventListener("change",function(){t.value=(0,r.default)(Number(t.value),Number(t.min),Number(t.max))},!1)}),e.forEach(function(e){"number"===e.type&&(t[e.id]=Number(e.value)),"checkbox"===e.type&&(t[e.id]=e.checked)}),t.figureSize=Math.min(window.innerWidth-2*t.margin,window.innerHeight-2*t.margin),t.cellSize=t.figureSize/t.cellsPerSide,t.linearAssignment&&(t.cellSize-=t.padding),t},resetSettings:function(){var e=o;document.querySelector("#epsilon").value=e.epsilon,document.querySelector("#perplexity").value=e.perplexity,document.querySelector("#steps").value=e.steps,document.querySelector("#linearAssignment").checked=e.linearAssignment,document.querySelector("#cellsPerSide").value=e.cellsPerSide,document.querySelector("#padding").value=e.padding}}},function(e,t,n){"use strict";e.exports=function(e,t,n){return e<=t?t:e>=n?n:e}},function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=(f(n(4)),n(0)),i=f(n(5)),u=f(n(6)),c=f(n(7)),a=n(1),l=f(n(8)),d=f(n(2)),s=f(n(9));function f(e){return e&&e.__esModule?e:{default:e}}var p=0,g=(0,s.default)(500,[0,0]),m=(0,a.getSettings)(),y=!0,v=new Worker("./tsne_worker.js"),S=new Worker("./assignment_worker.js");(0,o.createEventBindings)(m),(0,u.default)(),(0,c.default)(1200);var b=d3.scaleLinear().range([0,m.figureSize]),h=d3.scaleLinear().range([m.figureSize,0]),q=(0,l.default)(m),x=r(q,2),w=x[0],k=x[1],E=d3.zoom().scaleExtent([1,15]).on("zoom",function(){var e=document.querySelector("body").dataset;if("open"===e.state&&"none"===e.overlay){var t=d3.zoomTransform(this),n=t.k,r=m.figureSize*n,o=window.innerWidth/2,i=window.innerHeight/2,u=w*n,c=k*n;t.x=(0,d.default)(t.x,o-u-r,o-u),t.y=(0,d.default)(t.y,i-c-r,i-c),L.attr("transform",t)}}),L=d3.select("#figure").call(E).append("g").attr("id","logo-wrapper");L.selectAll(".logo").data(g).enter().append("image").attr("class","logo").attr("xlink:href",function(e,t){return"images/"+(t+1).toString().padStart(3,"0")+".png"});var z=function(e){m=(0,a.getSettings)(),p=0,g=(0,s.default)(500,[0,0]),v.postMessage({data:e,options:m})},A=function(e){var t=d3.transition().duration(100);L.selectAll(".logo").data(e).transition(t).attr("height",m.cellSize).attr("width",m.cellSize).attr("x",function(e){return m.linearAssignment?w+e[0]+m.padding/2:w+e[0]}).attr("y",function(e){return m.linearAssignment?k+e[1]+m.padding/2:k+e[1]})};fetch("./data.json").then(function(e){return e.json()}).then(function(e){window.Worker&&(z(e),v.onmessage=function(e){g=e.data,p+=1,b.domain(d3.extent(g,function(e){return e[0]})).nice(),h.domain(d3.extent(g,function(e){return e[1]})).nice(),g=g.map(function(e){return[b(e[0]),h(e[1])]}),m.linearAssignment?(y||p===m.steps)&&(S.postMessage({options:m,data:g}),y=!1):A(g),(0,i.default)(p,m)},S.onmessage=function(e){y=!0,g=e.data,A(g)},document.querySelector("#update").addEventListener("click",function(){(0,o.setOverlay)("none"),z(e)},!1))}),window.onresize=function(){(0,c.default)(1200),m=(0,a.getSettings)();var e=(0,l.default)(m),t=r(e,2);w=t[0],k=t[1]}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=document.querySelector(".entry-state"),i=document.querySelector(".calculating-state"),u=document.querySelector("#calculating");e.exports=function(e,t){var n=t.steps,c="Step "+e+" of "+n+" ("+Math.round(e/n*100)+"%)";o.innerText=c,i.innerText=c,1===e?u.classList.add("visible"):e===n&&(u.classList.remove("visible"),"loading"===document.querySelector("body").dataset.state?(0,r.setState)("closed"):(0,r.setState)("open"))}},function(e,t,n){"use strict";e.exports=function(){document.querySelectorAll("ol .icon").forEach(function(e){e.addEventListener("click",function(){e.parentNode.parentNode.classList.toggle("open")},!1)})}},function(e,t,n){"use strict";e.exports=function(e){var t=document.querySelector("#entry"),n=window.innerWidth-15,r=n-e>200?(n-e)/2:100;t.style.right=r+"px"}},function(e,t,n){"use strict";e.exports=function(e){var t=window.innerWidth,n=window.innerHeight,r=t-2*e.margin,o=n-2*e.margin,i=(t-e.figureSize)/2,u=(n-e.figureSize)/2;return[r>o?i:e.margin,r<o?u:e.margin]}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=[],r=0;r<e;r+=1)n.push(t);return n}}]);